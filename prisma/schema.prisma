generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

enum Role {
  ADMIN
  USER
}

model User {
    id          String   @id @default(uuid())
    email       String   @unique @db.VarChar(150)
    firstname   String   @db.VarChar(100)
    lastname    String   @db.VarChar(100)
    password    String    
    role        Role     @default(USER)
    createdAt   DateTime @default(now())

    ResetPassword   ResetPassword[] //Relação com a tabela de recuparação de senha
    RefreshToken    RefreshToken[]  //Relação com a tabela de registro da sessao
}

model ResetPassword {
    id          String   @id @default(uuid())
    token       String   @unique
    expiresAt   DateTime
    createdAt   DateTime @default(now())
    userId      String
    user User   @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model RefreshToken {
    id           String   @id @default(uuid())
    token        String   @unique
    userId       String
    user User    @relation(fields: [userId], references: [id], onDelete: Cascade)
    expiresAt    DateTime
    createdAt    DateTime @default(now())
}